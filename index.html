<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Promo Produk</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
  />
</head>
<body class="min-h-screen bg-gray-100 flex items-center justify-center p-4 relative" style="background-image: url('https://storage.googleapis.com/a1aa/image/89c3b8d3-c135-4ecb-844b-59110195a649.jpg'); background-size: cover; background-position: center;">
  <div class="bg-white bg-opacity-90 backdrop-blur-md rounded-lg shadow-lg max-w-md w-full p-6 text-gray-900 font-sans space-y-6 z-10 relative">
    <h1 class="text-3xl font-extrabold text-center mb-4 text-red-600">ðŸ’¥PROMOðŸ’¥</h1>
    <ul class="text-lg font-semibold space-y-2">
      <li>7 HARI = 10.000</li>
      <li>14 HARI = 20.000</li>
      <li>21 HARI = 30.000</li>
      <li>28 HARI = 40.000</li>
      <li>35 HARI = 50.000</li>
    </ul>
    <h2 class="text-xl font-bold mb-2 border-b border-gray-300 pb-1">BENEFIT</h2>
    <ul class="list-disc list-inside mb-6 space-y-1 text-gray-800">
      <li>BOLEH REQUEST SC SENDIRI</li>
      <li>BOLEH NEGO</li>
      <li>1 SEWA ADALAH 1 GRUP</li>
      <li>JIKA BOT DI KICK MAKA AKAN MEMBAYAR ULANG</li>
      <li>JIKA NOMOR BOT KEBLOKIR MAKA HARUS BAYAR SEKILAS</li>
    </ul>
    <p class="mb-6 font-semibold text-gray-900">
      HUBUNGI WHATSAPP: <a href="https://wa.me/6285955201695" target="_blank" class="text-blue-600 underline">6285955201695</a>
    </p>
    <form id="orderForm" class="space-y-4">
      <label for="product" class="block font-semibold text-gray-900">Pilih Produk:</label>
      <select id="product" name="product" required class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <option value="" disabled selected>Pilih durasi sewa</option>
        <option value="7 Hari = 10000" data-price="10000">7 HARI = 10.000</option>
        <option value="14 Hari = 20000" data-price="20000">14 HARI = 20.000</option>
        <option value="21 Hari = 30000" data-price="30000">21 HARI = 30.000</option>
        <option value="28 Hari = 40000" data-price="40000">28 HARI = 40.000</option>
        <option value="35 Hari = 50000" data-price="50000">35 HARI = 50.000</option>
      </select>

      <label for="promoCode" class="block font-semibold text-gray-900">Kode Promo:</label>
      <input
        type="text"
        id="promoCode"
        name="promoCode"
        placeholder="Masukkan kode promo"
        class="w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
        autocomplete="off"
      />
      <p id="discountInfo" class="text-green-700 font-semibold hidden"></p>

      <div class="text-right font-semibold text-lg text-gray-900">
        Total: Rp <span id="totalPrice">0</span>
      </div>

      <button type="submit" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 rounded-md transition-colors duration-300">
        Kirim ke Admin
      </button>
    </form>
    <div class="mt-6 p-4 bg-blue-100 border border-blue-300 rounded-md text-center">
      <h3 class="text-lg font-bold mb-2 text-blue-800">Gabung Saluran WhatsApp Kami!</h3>
      <p class="mb-3 text-blue-700">Dapatkan update terbaru dan promo menarik langsung di saluran WhatsApp kami.</p>
      <a href="https://whatsapp.com/channel/0029VbAuluK4CrfgyQhHXp45" target="_blank" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded transition-colors duration-300">
        Join Sekarang
      </a>
    </div>
  </div>

  <!-- Popup Overlay -->
  <div id="popupOverlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-20">
    <div class="bg-white rounded-lg shadow-lg max-w-sm w-full p-6 relative">
      <button id="closePopup" class="absolute top-2 right-2 text-gray-600 hover:text-gray-900 text-xl font-bold">&times;</button>
      <h2 class="text-xl font-bold mb-4 text-center text-blue-800">Gabung Saluran WhatsApp Kami!</h2>
      <p class="mb-4 text-center text-blue-700">Dapatkan update terbaru dan promo menarik langsung di saluran WhatsApp kami.</p>
      <div class="text-center">
        <a href="https://whatsapp.com/channel/0029VbAuluK4CrfgyQhHXp45" target="_blank" class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded transition-colors duration-300">
          Join Sekarang
        </a>
      </div>
    </div>
  </div>

  <script>
    const promoCodes = {
      "DISKON10": 0.2,  // 10% discount
      "PROMO20": 0.1,  // 20% discount
      "SALE30": 0.5    // 30% discount
    };

    const productSelect = document.getElementById('product');
    const promoInput = document.getElementById('promoCode');
    const discountInfo = document.getElementById('discountInfo');
    const totalPriceEl = document.getElementById('totalPrice');

    function calculateTotal() {
      const selectedOption = productSelect.options[productSelect.selectedIndex];
      if (!selectedOption || !selectedOption.dataset.price) {
        totalPriceEl.textContent = '0';
        discountInfo.classList.add('hidden');
        return 0;
      }
      let price = parseInt(selectedOption.dataset.price, 10);
      const promoCode = promoInput.value.trim().toUpperCase();

      if (promoCode === "7Gh6y8") {
        // Special promo: fixed price 5000, no message shown
        const discountedPrice = 5000;
        totalPriceEl.textContent = discountedPrice.toLocaleString('id-ID');
        discountInfo.classList.add('hidden');
        return discountedPrice;
      }

      if (promoCode && promoCodes[promoCode]) {
        const discount = promoCodes[promoCode];
        const discountAmount = Math.floor(price * discount);
        const discountedPrice = price - discountAmount;
        discountInfo.textContent = `Kode promo valid! Anda mendapatkan potongan Rp ${discountAmount.toLocaleString('id-ID')}`;
        discountInfo.classList.remove('hidden');
        totalPriceEl.textContent = discountedPrice.toLocaleString('id-ID');
        return discountedPrice;
      } else {
        discountInfo.classList.add('hidden');
        totalPriceEl.textContent = price.toLocaleString('id-ID');
        return price;
      }
    }

    productSelect.addEventListener('change', calculateTotal);
    promoInput.addEventListener('input', calculateTotal);

    document.getElementById('orderForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const productOption = productSelect.options[productSelect.selectedIndex];
      if (!productOption || !productOption.value) {
        alert('Silakan pilih produk terlebih dahulu.');
        return;
      }
      const promoCodeRaw = promoInput.value.trim();
      const promoCode = promoCodeRaw.toUpperCase();
      let message = '';
      if (promoCode === "AKUBELI123") {
        message = `Halo Admin, saya ingin memesan sewa bot whatsapp dengan durasi: ${productOption.value} dan menggunakan kode promo potong harga 5.000`;
      } else if (promoCode && promoCodes[promoCode]) {
        message = `Halo Admin, saya ingin memesan sewa bot whatsapp dengan durasi: ${productOption.value} dengan kode promo ${promoCodeRaw}`;
      } else {
        message = `Halo Admin, saya ingin memesan sewa bot whatsapp dengan durasi: ${productOption.value}`;
      }
      const waNumber = '6285955201695';
      const url = `https://wa.me/${waNumber}?text=${encodeURIComponent(message)}`;
      window.open(url, '_blank');
    });

    // Initialize total price on page load
    calculateTotal();

    // Popup logic
    const popupOverlay = document.getElementById('popupOverlay');
    const closePopupBtn = document.getElementById('closePopup');

    // Show popup after 3 seconds
    window.addEventListener('load', () => {
      setTimeout(() => {
        popupOverlay.classList.remove('hidden');
      }, 3000);
    });

    closePopupBtn.addEventListener('click', () => {
      popupOverlay.classList.add('hidden');
    });

    // Optional: close popup when clicking outside the popup content
    popupOverlay.addEventListener('click', (e) => {
      if (e.target === popupOverlay) {
        popupOverlay.classList.add('hidden');
      }
    });
  </script>
</body>
</html>
